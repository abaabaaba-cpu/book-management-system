var B=Object.defineProperty,V=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var S=(o,e,t)=>e in o?B(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,T=(o,e)=>{for(var t in e||(e={}))P.call(e,t)&&S(o,t,e[t]);if(C)for(var t of C(e))K.call(e,t)&&S(o,t,e[t]);return o},I=(o,e)=>V(o,J(e));import{u as g,r as k,P as z,a as r,o as m,c as f,w as u,b as i,E as h,d as y,D,t as E,e as H,f as O,g as b,h as j,F as L,i as M,j as q,k as $}from"./vendor.0a286c0e.js";const G=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))n(d);new MutationObserver(d=>{for(const l of d)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(d){const l={};return d.integrity&&(l.integrity=d.integrity),d.referrerpolicy&&(l.referrerPolicy=d.referrerpolicy),d.crossorigin==="use-credentials"?l.credentials="include":d.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(d){if(d.ep)return;d.ep=!0;const l=t(d);fetch(d.href,l)}};G();var v=(o,e)=>{const t=o.__vccOpts||o;for(const[n,d]of e)t[n]=d;return t};const Q={name:"Header",props:{checkAll:Boolean,isIndeterminate:Boolean,updateState:Function},setup(o,{emit:e}){const t=g(),n=k(""),d=async s=>{if(t.getters["todos/todosLen"]>=10){h.closeAll(),h.warning("\u6700\u591A\u53EF\u6DFB\u52A0 10 \u4E2A"),n.value="";return}if(s.trim()===""){h.closeAll(),h.warning("\u8F93\u5165\u9879\u4E0D\u80FD\u4E3A\u7A7A");return}if(await t.dispatch("todos/checkName",s)){h.closeAll(),h.warning("\u8F93\u5165\u9879\u4E0D\u80FD\u91CD\u590D");return}const c={id:String(new Date().valueOf()),name:s,done:!1};t.commit({type:"todos/addTodo",todoObj:c}),o.updateState(t,e),n.value=""};return{Plus:z,todo:n,handleKeyUp:s=>{const{keyCode:a,target:c}=s,{value:_}=c;a===13&&d(_)},updateTodo:d}}},W=y("\u6DFB\u52A0");function X(o,e,t,n,d,l){const s=r("el-alert"),a=r("el-button"),c=r("el-input"),_=r("el-card");return m(),f(_,{"body-style":{padding:"10px"}},{default:u(()=>[i(s,{center:"",closable:!1,effect:"dark",title:"vue3-todo-list",type:"success"}),i(c,{modelValue:n.todo,"onUpdate:modelValue":e[1]||(e[1]=A=>n.todo=A),disabled:o.$store.getters["todos/todosLen"]>=10,maxlength:"20",placeholder:"\u6700\u5927\u957F\u5EA620\uFF0C\u56DE\u8F66\u8FDB\u884C\u6DFB\u52A0",onKeyup:n.handleKeyUp},{append:u(()=>[i(a,{icon:n.Plus,onClick:e[0]||(e[0]=()=>n.updateTodo(n.todo))},{default:u(()=>[W]),_:1},8,["icon"])]),_:1},8,["modelValue","disabled","onKeyup"])]),_:1})}var Y=v(Q,[["render",X],["__scopeId","data-v-bed01608"]]);const Z={name:"Item",props:{todo:{type:Object,default:()=>{}}},setup(){const o=g();return{deleteTodo:t=>{o.commit({type:"todos/deleteTodo",id:t})},Delete:D}}};function ee(o,e,t,n,d,l){const s=r("el-button"),a=r("el-checkbox");return m(),f(a,{label:t.todo.id},{default:u(()=>[y(E(t.todo.name)+" ",1),t.todo.done?(m(),f(s,{key:0,class:"todo-del-icon",type:"danger",size:"mini",icon:n.Delete,circle:"",onClick:e[0]||(e[0]=H(()=>n.deleteTodo(t.todo.id),["stop"]))},null,8,["icon"])):O("",!0)]),_:1},8,["label"])}var oe=v(Z,[["render",ee],["__scopeId","data-v-0c4f259a"]]);const te={name:"List",components:{Item:oe},props:{todos:Array,checkAll:Boolean,isIndeterminate:Boolean},setup(o,{emit:e}){const t=g();return{handleCheckedChange:d=>{t.commit("todos/updateTodo",{doneTodos:d});const l=d.length;e("update:checkAll",l===o.todos.length),e("update:isIndeterminate",l>0&&l<o.todos.length)}}}};function ne(o,e,t,n,d,l){const s=r("Item"),a=r("el-checkbox-group");return m(),f(a,{"model-value":o.$store.state.todos.doneTodos,onChange:n.handleCheckedChange},{default:u(()=>[(m(!0),b(L,null,j(t.todos,c=>(m(),f(s,{key:c.id,todo:c},null,8,["todo"]))),128))]),_:1},8,["model-value","onChange"])}var de=v(te,[["render",ne],["__scopeId","data-v-2cc28867"]]);const se={name:"Footer",props:{checkAll:Boolean,isIndeterminate:Boolean,updateState:Function},setup(o,{emit:e}){const t=g(),n=k(!1);return{Delete:D,checked:n,checkAllTodo:a=>{t.dispatch("todos/checkAll",a),e("update:checkAll",a),e("update:isIndeterminate",!1)},reverseCheck:()=>{t.dispatch("todos/reverseCheck"),o.updateState(t,e)},clearAllDone:()=>{t.dispatch("todos/clearAllDone"),o.updateState(t,e)}}}},le={class:"footer-wrapper"},re=y("\u5168\u9009"),ae=y("\u53CD\u9009");function ce(o,e,t,n,d,l){const s=r("el-checkbox"),a=r("el-alert"),c=r("el-button");return m(),b("div",le,[i(s,{border:"",size:"small","model-value":t.checkAll,indeterminate:t.isIndeterminate,onChange:n.checkAllTodo},{default:u(()=>[re]),_:1},8,["model-value","indeterminate","onChange"]),i(s,{modelValue:n.checked,"onUpdate:modelValue":e[0]||(e[0]=_=>n.checked=_),border:"",size:"small",onChange:n.reverseCheck},{default:u(()=>[ae]),_:1},8,["modelValue","onChange"]),i(a,{title:`\u5DF2\u5B8C\u6210 ${o.$store.getters["todos/doneTodosLen"]} / \u5168\u90E8 ${o.$store.getters["todos/todosLen"]}`,type:"info",closable:!1},null,8,["title"]),o.$store.getters["todos/isDone"]?(m(),f(c,{key:0,class:"todo-del-icon",type:"danger",size:"mini",icon:n.Delete,circle:"",onClick:n.clearAllDone},null,8,["icon","onClick"])):O("",!0)])}var ie=v(se,[["render",ce],["__scopeId","data-v-d1f3e2ac"]]);const ue={name:"App",components:{Header:Y,List:de,Footer:ie},setup(){const o=g(),e=k(!1),t=k(!0),n=k(!1);return{checkAll:e,isIndeterminate:t,isReset:n,handleResetAndRefresh:async()=>{e.value=!1,t.value=!0,n.value=!0,n.value=await o.dispatch("todos/resetTodos")},updateState:(s,a)=>{const c=s.getters["todos/todosLen"],_=s.getters["todos/doneTodosLen"];a("update:checkAll",_===c),a("update:isIndeterminate",_>0&&_<c)}}}},_e=y("\u91CD\u7F6E\u5237\u65B0");function pe(o,e,t,n,d,l){const s=r("Header"),a=r("List"),c=r("el-divider"),_=r("Footer"),A=r("el-button"),w=r("el-empty"),U=r("el-card"),F=r("el-col"),R=r("el-row");return m(),f(R,{justify:"center"},{default:u(()=>[i(F,{xs:24,sm:10,md:10,lg:10},{default:u(()=>[i(s,{checkAll:n.checkAll,"onUpdate:checkAll":e[0]||(e[0]=p=>n.checkAll=p),isIndeterminate:n.isIndeterminate,"onUpdate:isIndeterminate":e[1]||(e[1]=p=>n.isIndeterminate=p),updateState:n.updateState},null,8,["checkAll","isIndeterminate","updateState"]),i(U,{"body-style":{padding:"10px"}},{default:u(()=>[o.$store.state.todos.todos.length!==0?(m(),b(L,{key:0},[i(a,{todos:o.$store.state.todos.todos,checkAll:n.checkAll,"onUpdate:checkAll":e[2]||(e[2]=p=>n.checkAll=p),isIndeterminate:n.isIndeterminate,"onUpdate:isIndeterminate":e[3]||(e[3]=p=>n.isIndeterminate=p)},null,8,["todos","checkAll","isIndeterminate"]),i(c,{style:{margin:"10px 0"}}),i(_,{checkAll:n.checkAll,"onUpdate:checkAll":e[4]||(e[4]=p=>n.checkAll=p),isIndeterminate:n.isIndeterminate,"onUpdate:isIndeterminate":e[5]||(e[5]=p=>n.isIndeterminate=p),updateState:n.updateState},null,8,["checkAll","isIndeterminate","updateState"])],64)):(m(),f(w,{key:1},{description:u(()=>[]),default:u(()=>[i(A,{type:"primary",size:"small",loading:n.isReset,onClick:n.handleResetAndRefresh},{default:u(()=>[_e]),_:1},8,["loading","onClick"])]),_:1}))]),_:1})]),_:1})]),_:1})}var me=v(ue,[["render",pe]]);const x=[{id:"1638256190206",name:"\u6572\u4EE3\u7801",done:!0},{id:"1638256191770",name:"\u6574\u7406\u7B14\u8BB0",done:!1},{id:"1638256193996",name:"\u5403\u996D",done:!1}],N=["1638256190206"],fe={todos:JSON.parse(JSON.stringify(x)),doneTodos:JSON.parse(JSON.stringify(N))},he={todosLen:o=>o.todos.length,doneTodosLen:o=>o.doneTodos.length,isDone:o=>o.todos.some(e=>e.done)},ke={updateDoneTodos(o){o.doneTodos=o.todos.reduce((e,t)=>(t.done&&e.push(t.id),e),[])},addTodo(o,{todoObj:e={}}){o.todos.unshift(e)},updateTodo(o,{doneTodos:e=[]}){o.doneTodos=e,o.todos=Array.from(o.todos,t=>I(T({},t),{done:e.includes(t.id)}))},deleteTodo(o,{id:e}){o.todos=o.todos.filter(t=>t.id!==e),o.doneTodos.splice(o.doneTodos.indexOf(e),1)},checkAllTodo(o,e){o.todos=Array.from(o.todos,t=>I(T({},t),{done:e}))},reverseTodoDone(o){o.todos=o.todos.map(e=>(e.done=!e.done,e))},resetTodos(o){o.todos=JSON.parse(JSON.stringify(x)),o.doneTodos=JSON.parse(JSON.stringify(N))},clearAllDoneTodo(o){o.todos=o.todos.filter(e=>!e.done)}},ge={checkName({state:o},e){return new Promise(t=>{t(o.todos.some(n=>n.name===e))})},checkAll({commit:o},e){o("checkAllTodo",e),o("updateDoneTodos")},reverseCheck({commit:o}){o("reverseTodoDone"),o("updateDoneTodos")},resetTodos({commit:o}){return new Promise(e=>{setTimeout(()=>{o("resetTodos"),e(!1)},1500)})},clearAllDone({commit:o}){o("clearAllDoneTodo"),o("updateDoneTodos")}};var ye={namespaced:!0,state:fe,getters:he,mutations:ke,actions:ge},ve=M({modules:{todos:ye}});q(me).use($).use(ve).mount("#app");
